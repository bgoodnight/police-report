---
title: "HIDA State Report"
author: "Centers for Disease Control and Prevention"
date: "February 5, 2018"
output:
  word_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
library(knitr)
library(dplyr)
library(reshape2)
knitr::opts_chunk$set(echo = TRUE)
if (!exists("survey")) { 
     survey = read.csv('data.csv')
     state <- 'GA'
     data <- survey[ which(survey$state==state ), ]
}
jurisdiction <- group_by(data, jurisdiction)
```

#Report for `r state.name[grep(state, state.abb)]`

What percentage of the `r nrow(data)` officers in `r state.name[grep(state, state.abb)]` are trained in responding to overdose?

```{r echo=FALSE}
kable(summarise(jurisdiction, Officers = n(), Trained = sum(add_training_identify_and_respon), Percent = (sum(add_training_identify_and_respon) / n())*100), digits=2, col.names = c('Jurisdiction','Officers','Trained','Percent'))

```

What percentage of officers work in departments that equip some or all officers to carry naloxone (this may not mean that every officer is equipped with naloxone)?

```{r echo=FALSE}
kable(summarise(jurisdiction, Officers = n(), Naloxone = sum(narcan_carry), Percent = (sum(narcan_carry) / n())*100), digits=2, col.names = c('Jurisdiction','Officers','Naloxone','Percent'))

```

How many overdose calls have officers responded to in the past 6 months?

```{r echo=FALSE}
if(mean(data$num_overdose_calls, na.rm=TRUE)>1){
kable(summarise(jurisdiction, Officers = n(), Total = sum(num_overdose_calls, na.rm=TRUE), Average = mean(num_overdose_calls, na.rm=TRUE)), digits=2, col.names = c('Jurisdiction','Officers','Calls','Average Per Officer'))
}else{
kable(summarise(jurisdiction, Officers = n(), Total = sum(num_overdose_calls, na.rm=TRUE), Percent = (sum(num_overdose_calls>0, na.rm=TRUE)/n())*100), digits=2, col.names = c('Jurisdiction','Officers','Calls','% That Answered'))
}
```

How many overdoses have officers  reversed with naloxone in the past 6 months ?

```{r echo=FALSE}
if(mean(data$num_naloxone_administer, na.rm=TRUE)>1){
kable(summarise(jurisdiction, Officers = n(), Total = sum(num_naloxone_administer, na.rm=TRUE), Average = mean(num_naloxone_administer, na.rm=TRUE)), digits=2, col.names = c('Jurisdiction','Officers','Reversals','Average Per Officer'))
}else{
kable(summarise(jurisdiction, Officers = n(), Total = sum(num_naloxone_administer, na.rm=TRUE), Percent = (sum(num_naloxone_administer>0, na.rm=TRUE)/n())*100), digits=2, col.names = c('Jurisdiction','Officers','Reversals','% That Reversed'))
}
```

#`r state.name[grep(state, state.abb)]`

AMONG OFFICERS WHO HAVE RESPONDED TO AT LEAST ONE OVERDOSE CALL IN THE PAST 6 MONTHS:_

How commonly are victims of an overdose arrested during the overdose call?

```{r echo=FALSE}
kable(summarise(jurisdiction, Officers = n(), Total = sum(od_arrest, na.rm=TRUE), Percent = (sum(od_arrest>0, na.rm=TRUE)/n())*100), digits=2, col.names = c('Jurisdiction','Officers','Arrests','% Arrested'))
```

How commonly are witnesses to an overdose arrested during the overdose call?

```{r echo=FALSE}
kable(summarise(jurisdiction, Officers = n(), Total = sum(overdose_witness_arrest, na.rm=TRUE), Percent = (sum(overdose_witness_arrest>0, na.rm=TRUE)/n())*100), digits=2, col.names = c('Jurisdiction','Officers','Arrests','% Arrested'))
```

How would you describe the attitude of officers in your department about carrying and administering naloxone?

>[Insert visual depiction of perceived attitudes about naloxone, by jurisdiction type]


>[STATE]

Does [INSERT STATE CODE]  have a 911 Good Samaritan Law in effect?  YES / NO

>[Insert % of officers who answered correctly]

Does [INSERT STATE CODE]  provide immunity from  arrest?  YES / NO

>[Insert % of officers who answered correctly]

Does [INSERT STATE CODE]  provide immunity from  criminal charges?  YES / NO

>[Insert % of officers who answered correctly]

>[STATE]

Percentage of [STATE] patrol officers who desire additional training in the following topics:

- Identifying and responding to opioid overdoses:

>[Insert % of officers who chose this training topic, by jurisdiction]

- The safe handling of opioids and other illicit substances in the field:

>[Insert % of officers who chose this training topic, by jurisdiction]

- The clinical science and psychology of opioid use disorder (addiction):

>[Insert % of officers who chose this training topic, by jurisdiction]

- Provisions and procedures related to [STATE&#39;s] 911 Good Samaritan Law:

>[Insert % of officers who chose this training topic, by jurisdiction]

- Medical, social, and psychological services available in [STATE] for people experiencing opioid use disorder (addiction) and their families:

>[Insert % of officers who chose this training topic, by jurisdiction]

- Training already received is satisfactory:

>[Insert % of officers who chose this training topic, by jurisdiction]

Other training topics suggested:

>[Insert bullet list of additional  suggestions from the &quot;Other&quot; text box on the survey]

>[STATE]

These agencies should be involved in post-overdose outreach efforts to connect the overdose victim with treatment and other services.

>[Insert visual depiction of which groups officers elected to be appropriate for post-overdose outreach. Do not break out by jurisdiction.  There&#39;s no right way to do this, the only concern is that any color coding across various bar charts or stratification needs to be consistent across the document (i.e. County police are always blue. YES responses are always yellow, etc)]

>[STATE]

>[Show, through numbers or visuals, the percent of officers who AGREED with the following statements. Do not break out by jurisdiction]

911 Good Samaritan Laws

- A 911 Good Samaritan Law increases the number of 911 calls by people who witness an overdose.
- 911 Good Samaritan Laws may encourage more opioid use by sending the message that drug use is OK.
- 911 Good Samaritan Laws save lives

Overdose Response Procedures and Protocols

- It is important for police officers to be present at the scene of an overdose to protect medical personnel.
- It is important for police officers to be present at the scene of an overdose, because they may be the first responder to arrive on the scene with Naloxone and save a life.
- It is important for police officers to be present at the scene of an overdose to enforce the law.

Naloxone Training, Carry, and Distribution

- I am worried about the liability of officers who carry and/or administer naloxone.
- Programs to train and distribute naloxone to lay community members to treat overdose save lives.
- Programs to train and distribute naloxone to lay community members may encourage opioid use by sending the message that drug use is OK.
- Training community members how to identify and respond to an overdose may encourage opioid drug use by sending the message that drug use is OK.

>[STATE]

Fentanyl in the Drug Supply

- I am worried about myself and other first responders who are called to assist persons suffering overdose, because there is so much fentanyl in the drug supply.
- I am worried about people who use drugs, because there is so much fentanyl in the drug supply.

Opioid Misuse and Opioid Use Disorder

- Opioid misuse is a disease that should be dealt with through treatment and support services.
- Arrest can play an important role in helping drug users change their behavior.

>[STATE]

Personal Connection to the Opioid Epidemic

>[Insert visual that shows the percentage of officers who know someone who has lived with a substance use disorder AND the percentage of officers who know someone who has experienced an overdose. Break out by jurisdiction]



Other blurbs will go here to describe what these data correlate with, if anything JENNIFER WILL UPDATE STATE BY STATE:

- Example 1
- Example 2
- Example 3

>[STATE]

A total of 2869 patrol officers from 20 states participated in this survey.
`r nrow(data)` (`r round((nrow(data)/2869)*100,2)`%) of those officers serve in `r state.name[grep(state, state.abb)]`.



>Insert here descriptive stats and/or visuals for the following [N(%)]

- Jurisdiction of respondents (State, county, city, town, village)
- Reported size of the respondents&#39; department (&lt;9, 10-19, 20-49, 50-99, 100-499, &gt;500)
- Number of years on the force (we&#39;ll give this to you as a continuous variable and as a categorical variable with pre-set cut points)
- Age
- Gender (Participants were REALLY touchy about age and gender. Many can only imagine nefarious ways to use this information. So, depending  on how we can show this, we might decide to just cut out the presentation of these variables in the front matter (the section with the pretty pictures))
